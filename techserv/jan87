






















TTTTTTTTTTT EEEEEEEEE  CCCCCCCC  HHH    HHH TTTTTTTTTTT IIIIIIIIIII  PPPPPPP
TTTTTTTTTTT EEEEEEEEE CCCCCCCCCC HHH    HHH TTTTTTTTTTT IIIIIIIIIII PPPPPPPPP
    TTT     EEE       CCC     CC HHH    HHH     TTT         III     PPP    PPP
    TTT     EEEEE     CCC        HHHHHHHHHH     TTT         III     PPP    PPP
    TTT     EEEEE     CCC        HHHHHHHHHH     TTT         III     PPPPPPPPP
    TTT     EEE       CCC     CC HHH    HHH     TTT         III     PPP
    TTT     EEEEEEEEE CCCCCCCCCC HHH    HHH     TTT     IIIIIIIIIII PPP
    TTT     EEEEEEEEE  CCCCCCCC  HHH    HHH     TTT     IIIIIIIIIII PPP










                               January 01, 1987
























                                   TABLE OF CONTENTS

        Section                                                            Page



        1.   Billing/Accounting:Disconnect Type 11 on X.25 Sessions           1


        2.   NAD Version 1.05 Release to 'SYS' Directory                      3


        3.   Host Down Status                                                 4


        4.   Recieve Gate and Transmit Gate Circuit                           6


        5.   Some Questions Concerning SDLC/SNA Interfaces                    8


        6.   Limited Release of SDLC Version 1.12 -- TECHALERT                9


        7.   What Does TMCS Look at Before Reporting a Line Out              11


        8.   Pathfinding Algorithm/Takeover Method used by Sups              13


        9.   SDLC Interface crash during startup--TECHALERT                  15


        10.  Engine Ring Wrap                                                16
















        Billing/Accounting:Disconnect Type 11 on X.25 SessionsDecember 19, 1986






              1 -  Billing/Accounting:Disconnect Type 11 on X.25 Sessions







        Written by : James Wang, HQ Network Staff Consultant
              Date : December 02, 1986







        FOLLOWING, ARE THE 5 CASES  IN WHICH XCOM WILL REPORT "B700  E000 000B"
        OR  DISCONNECT  TYPE 11  (ACCOUNTING  MESSAGES) UPON  TERMINATION  OF A
        SESSION:


          CASE 1. LOGIN TIMEOUT.
                  AFTER XCOM RECEIVES A NEEDLE FROM THE NETWORK, THE LOGIN TIMER
                  IS TURNED ON. IF THE CALL IS FROM CONSAT, USER IS PROMPTED 
                  ';' OR '+' FOR MORE INFORMATION. IF USER DOESN'T ENTER ANY 
                  DATA IN A DEFINED TIME INTERVAL (LOGIN TIMER), THE LOGIN 
                  TIMER WILL THEN EXPIRE AND 'B700 E000 000B' IS REPORTED TO 
                  SUP.

          CASE 2. USERNAME ERROR INSIDE THE NEEDLE AND CIRCUIT IS ZAPPED.

          CASE 3. CALL IS FROM NON-XCOM. XCOM RECEIVES A NEEDLE FROM NETWORK 
                  AND THEN BUILDS A CALL REQUEST PACKET. IF XCOM FINDS SOME 
                  FACILITY ERROR IN THE MIDDLE OF BUILDING CALL REQUEST PACKET,
                  'E000 000B' WILL BE REPORTED TO SUP AND CIRCUIT IS ZAPPED.

          CASE 4. CALL IS FROM XCOM OR OTHER IIX-INTERFACE. ORIGINATOR WILL 
                  PASS THE CALL REQUEST INFORMATION VIA IIX MEESAGES 87, 88, 
                  8C, 8D, 89.  AFTER XCOM COLLECTS ALL THIS CALL REQUEST 
                  INFORMATION FROM ORIGINATOR, XCOM WILL THEN PUT THEM 
                  TOGETHER TO FORM A CALL REQUEST PACKET AND THEN SEND IT TO 
                  THE LINK.  IF THERE IS AN ERROR IN THESE IIX MESSAGES, XCOM
                  WILL THEN REPORT 'E000 000B' B7 MESSAGE AND ZAP THE CIRCUIT.

        *****ALL 4 CASES, ABOVE, OCCUR BETWEEN THE TIME XCOM RECEIVES THE 
             NEEDLE AND THE TIME IT TAKES TO SEND A CALL REQUEST PACKET TO THE
             LINK. THE CIRCUIT HASN'T BEEN BUILT TO THE DESTINATION YET.


                                           1                      
        Billing/Accounting:Disconnect Type 11 on X.25 Sessions


          CASE 5. XCOM RECEIVES A CLEAR REQUEST AT THE TIME XCOM RECEIVED
                  A NEEDLE AND IN THE MIDDLE OF BUILDING A CALL REQUEST
                  PACKET. IN THIS CASE THE CIRCUIT WILL BE ZAPPED AND 
                  'E000 000B' WILL BE REPORTED.


        -----------------------------------------------------------------------
        FOR CASE 1-4, IT MAY (MAY NOT) BE NETWORK/INTERFACE ERROR.
        FOR CASE 5, HOST/FE NEEDS TO BE CHECKED.













































                                           2                         
        NAD Version 1.05 Release to 'SYS' Directory         






                   2 -  NAD Version 1.05 Release to 'SYS' Directory







        Written by : Douglas Ellenberg, Mgr. Application's Support
              Date : December 5, 1986







        NAD VERSION 1.05 IS BEING  MOVED INTO THE (SYS) DIRECTORY.  IT  WILL NO
        LONGER BE NECESSARY TO SPECIFY  THE (SOURCE) OR ANY DIRECTORY  IN ORDER
        TO USE THIS VERSION.

        THIS VERSION OF NAD HAS BEEN IN FULL RELEASE SINCE SEPTEMBER  19, 1986.
        SOME OF THE ADVANTAGES OF VERSION 1.05 OVER VERSION 1.01 ARE:


                1. Further increase memory available for Macro definitions and
                   Macro call expansion.
                2. A List directive parameter has been added to control the
                   listing of If, Else and Ei directives.
                3. Assembly times has been reduce by 40%.
                4. Proprietary symbols are now stored on NIB files and can be
                   referenced by users with Tymshare license.


        VERSION 1.01 OF NAD WILL BE AVAILABLE IN THE (SSBACKUP) DIRECTORY AFTER
        IT IS REMOVED FROM (SYS).

        IF YOU EXPERIENCE ANY PROBLEMS WITH VERSION 1.05, PLEASE CONTACT SHIAO-
        MING TSUI VIA ONTYME: *** NAD OR AT 408 942-5263.











                                           3                       
        Host Down Status                                    






                                 3 -  Host Down Status







        Original Question by: Michelle Willhauck, Field CC
                 Response by: Adela Lee, HQ Network Staff Consultant
                       Date : December 3, 1986







        ORIGINAL QUESTION:

        I HAVE AN SNA HIF THAT IS RANDOMLY REPORTING ITSELF DOWN ON  A FREQUENT
        BASIS FOR ANYWHERE FROM 5 SEC TO SEVERAL HOURS.

        MY  QUESTION IS;  DOES THE  SNA  CODE CHECK  THE SIO  STATUS  BITS?  IN
        PARTICULAR, BITS 45 & 47?

        REASON THAT I AM ASKING IS:   JERRY LUCAS FOUND THAT THE X.25  CODE WAS
        CHECKING BITS 45 &  47 TO SEE IF LINE  WAS IDLE, IF LINE WAS  IDLE THEN
        THE X.25 SLOT WOULD DROP THE LINE TO SABM.  I AM CURIOUS TO SEE IF THIS
        COULD BE A SIMILIAR PROBLEM.

        RESPONSE:

        The way the  SNA HIF reports host  DOWN status is quite  different from
        most of the other interfaces.  Obviously the host will show  DOWN state
        in DDT if  the line becomes  idle, but this is  only one of  many cases
        where the host DOWN is updated. Unlike like X.25, the SNA HIF uses port
        availability to determine whether the host should be ANSWERED  or DOWN.
        The slot will report host  DOWN state once it detects no  port availble
        for LU-LU  session. There are  several reasons to  cause the  number of
        free ports for LU-LU session assignments reaching zero:

        1) The slot gets initially loaded and no LUs are being activated by the
        host.

        2) The host  issues a DACTPU  to each PU  assigned under the  same host
        number.



                                           4                       
        Host Down Status                                      


        3) The host issues  an DACTLU to each  LU assigned under the  same host
        number.

        4) The host issues a SNRM to request re-establishment of the link,

        5) The host issues a DISC to request the SNA HIF returning to NDM.

        6) The SNA HIF issues a DM to the link.

        7) After a period of time  for line being idle, the SNA  HIF determines
        the external system being inoperable .

        8) The signals get dropped completely.

        Since host  DOWN status  can mean  many defferent  things, it  does not
        necessarily imply a hardware failure.  






































                                           5                     
        Recieve Gate and Transmit Gate Circuit              






                      4 -  Recieve Gate and Transmit Gate Circuit







        Original Question by: Ed Simmons, Field CC
                 Response by: DeeJong Tsao, HQ Network Staff Consultant
                       Date : December 7, 1986







        ORIGINAL QUESTION:

        A CUSTOMER HAS BEEN EXPERIENCING  CONSIDERABLE DOWN TIME DUE TO  ONE OF
        THEIR USER  LOGGING IN AS  A 3101 TYPE  TERMINAL.  DUE TO  A PROCEDURAL
        ERROR OR AN ABNORMAL DISCONNECT THE RECIEVE GATE IS BEING CLOSED, THUS,
        PREVENTING OTHER  USERS FROM  LOGGING IN.        

        IS TYMNET  PLANNING TO MAKE THE RECIEVE  GATE AND TRANSMIT GATE CIRCUIT
        DEPENDENT INSTEAD OF INTERFACE DEPENDENT.



        RESPONSE:

        Actually, RCV gates and XMT gates are opened by initialization routine,
        and stay open all the time. PBH does not care which interface  he talks
        to.  The only time he closes the RCV gate is during 3101 terminal logon
        attempt; that's because of 3101 terminal hardware limitation.


        Most of 3270  applications will send a  banner message to  an available
        device initially. What PBH does is whenever there is circuit built to a
        device port, then PBH sends a sense/status message to the  host meaning
        the device is available. As soon as the host sees this message, he will
        deliver the banner to the device. This message will not cause CMT users
        or  470 users  any trouble.  But  it does  cause some  trouble  to 3101
        terminals.


        Because 3101 users need to  use  character  mode  to  log in to TYMNET,
        3101  is  not able  to  format  the  3270  data  stream until  in block
        mode.  The banner comes soon after the circuit is built. So  PBH closes
        the RCV gate to buy some  time for users to turn the block  mode switch


                                           6                      
        Recieve Gate and Transmit Gate Circuit               


        on. That's also why PBH prompts "switch to block mode and hit pf-1 key"
        to users. As  soon as PBH receives  PF-1 key indicating users  in block
        mode, then he reopens the RCV gate to let the banner pass thru.


        As you can tell from what I describe above, the RCV gates being  closed
        is independent from circuit or interface. It's because of  the  way the
        3101 terminal operates.














































                                           7                       
        Some Questions Concerning SDLC/SNA Interfaces        






                  5 -  Some Questions Concerning SDLC/SNA Interfaces







        Original Questions by: Ken Enright, Field CC
                 Response by : Adela Lee
                        Date : December 15, 1986






        a) Are there any restrictions on what kind of port resides along side 
           an SNA port on the daughter card?
        a) The past study proved that HDLC and SDLC can co-exist on a single
           daughter card. We had a customer configured this way once before
           and it did work.

        b) Have there been any problems with multiple SNA ports in a sigle 
           interface?
        a) Current SDLC extension cord and SNA/SDLC products both support 
           multi-drop configuration. 

        c) Can an SDLC extension cord be connectted to an SNA HIF?
        a) No, currently those two products are not compatible to each others.

        d) The most reliable way to determine microcode version?
        a) Microcode versions D and E are the only two types running out there.
           The best place to tell the micorcode version is at the top of PROM 
           chips on a motherboard. It is specified very clearly there what 
           version of PROM chips is used, and this is the simplest way to 
           determine microcode version.








                                           8                    
        Limited Release of SDLC Version 1.12 -- TECHALERT  






                6 -  Limited Release of SDLC Version 1.12 -- TECHALERT







        Written by : Shirley Chiang, Mgr. Interface Support
              Date : December 15, 1986






            SDLC version 1.12 has recently been announced as Limited Release 
        product on November 15, 1986.  Although the code is actually residing 
                                       ======================================
        in the SOURCE directory, deployment of this code MUST be approved by 
        =====================================================================
        Q.A. and STS prior to any new installations.  
        ============================================

            Due to  the fact  that installation of  this product  involves very
        extensive manpower support from STS and NTD, we strongly recommend that
        the  request  for  Limited  Release  site  be  arranged  with  QA Dept.
        ASAP.  Only through this channel, pieces of information can be gathered
        and reviewed  in order to  best understand customer's  environment  and
        for us to provide the most effective support when problems arise.


            Several cases have occured in  the past  few  weeks  in which  CC's 
        called  or escalated  problems during  customer's "acceptance  test" or
        installations  when  we  had  absolutely  no  background   information.
        This  resulted in tremendous disruption  of  work  since  my  group  is
        currently scheduled to bring up five new installations in the next 6 to
        8 weeks on top  of escalations from existing  customers.  We  will need
        your coorperation  to better allocate our  limited  manpower  resources
        in order to help you and the customers.


             To request SDLC version 1.12 usage, please fill out "*** SDLC.REQ"
        (or "*** SDLC.  REQUEST" accessible on  more ontyme hosts)  and prepare
        the required information - it may take joint effort of a sales rep. and
        technical  support   to  answer every  question properly.   Before this
        process is  completed and reviewed,  any request for  technical support



                                           9                      
        Limited Release of SDLC Version 1.12 -- TECHALERT     


        with unautohhorized  customers shall  be rejected by  STS right  on the
        spot.


             Please contact  John Gomes  (408-942-5142, QSATS.J/GOMES)   or his
        S/W Distribution Cordinator - Diana Houge (942-5363,  QSATS.D/HOUGE) or
        myself (942-5265) if you have any questions.















































                                          10                       
        What Does TMCS Look at Before Reporting a Line Out    






                7 -  What Does TMCS Look at Before Reporting a Line Out







        Original Question by: Mary Young, Field CC
                 Response by: Shiao-Ming Tsui
                       Date : December 14, 1986







        ORIGINAL QUESTION:

        WHAT DOES TMCS LOOK AT BEFORE REPORTING A LINE OUT?

        A CUSTOMER HAS A TMCS PROFILE SET UP TO INCLUDE  BOTH ENDPOINTS (NODES)
        OF A PARTICULAR  LINE.  THE LINE  IS A DEFINED  TIILINK IN THE  CODE ON
        EACH OF OF THESE NODES, NOT AN XLINK.  THE LINE SHOWS DOWN IN  XRAY AND
        PROBE--BUT IT  NEVER APPEARED  IN THE  TMCS DISPLAY  EXCEPTIONS SCREEN.
        WHY?  (THE LINE WENT DOWN--THERE  WAS A CHANGE IN STATUS  THAT REPORTED
        IN PROBE).





        RESPONSE:

             A line  test criteria is  used in TMCS  Display line  command.  It
        checks to  see that  at least  one of the  two nodes  is in  the user's
        profile and that the node is selected.  It also checks to see  that the
        line, consisting of  the first node and  port, the line,  consisting of
        the second node and port,  and the link, consisting of both  nodes, are
        selected.

            TMCS Display command displays the specified network  exceptions and
        updates the information periodically.   The default rate to  update the
        display information is 120 seconds and this value can be changed by the
        "SET DISPLAY seconds" command.   If a network exception happens  at the
        display interval and returns to normal status when the updating display
        is taking place,  then this exception will  not be seen in  the display
        screen but it still can be seen in Probe and TMCS log messages.

                                          11                       
        What Does TMCS Look at Before Reporting a Line Out    


            For  your case,  I would  think the  line down  situation  may have
        only appeared  in  less than  2  minutes and  the line is  up when  the
        display screen updates.  To  set  the display interval to a small value
        may catch this kind of exception report.


















































                                          12                 
        Pathfinding Algorithm/Takeover Method used by Sups  






                8 -  Pathfinding Algorithm/Takeover Method used by Sups







        Original Question by: Jean-Claude Jacotin
                 Response by: Gail Bubsey, HQ Network Staff Consultant
                       Date : December 17, 1986







        ORIGINAL QUESTION:

        Could you help  us find the information  we need to understand  the new
        pathfinding  algorithm  and  the new  takeover  method  used  by TYMNET
        supervisors?

        We have no information about  the new path finding algorithm.   For the
        new  takeover method,  we have  only the  Software  Release description
        SUP42.Y01 which includes a description of the "takeover  enhancement" (
        C.2 PIR 2091 ).  Is there any other document?

        Also  can you  answer to  the following  questions about  the "takeover
        enhancement":


           - The software release description of the "takeover enhancement" 
             evokes the degradation of performance observed with the previous
             takeover method.  What were the performances?  In terms of which 
             parameters were they defined?

           - The description emphasizes a new indicator, the "Command Circuit 
             Fanout."  How  is the new indicator used ?   Why such an emphasis?
             How does the new method improve the takeover performances?





        RESPONSE:

                Previous to version 42 takeover of a node involved the 

                                          13                        
        Pathfinding Algorithm/Takeover Method used by Sups   


        following chain of events:
                                             __________________
                                            |                  Node 1
                                            | 
                      Sup----------------Node A----------------Node 2
                                            |
                                            |__________________Node 3
               
        The Sup would sprout to A and send a needle to 1, then
                      sprout to A and send a needle to 2, then
                      sprout to A and send a needle to 3.

        With the new takeover,

        The Sup would sprout to A and send a needle to 1, then
                                      send a needle to 2, then
                                      send a needle to 3.

        As you can see, alot of the sprouting, or finding of least cost path to
        a node has been eliminated.

        The command circuit fanout indicator notes the ratio of the number of
        sprouts to the number of nodes taken over.  A poorly connected network:

        Sup----------------Node A----------------Node 1----------------Node 2

        would show a CCF of 1-2/2 or 0.  In other words, two sprouts had to
        be done to take over 2 nodes.

        If the network were more strongly connected:

                             ___________________
                             |                  Node 1
                             |
        Sup----------------Node A
                             |
                             |__________________Node 2

        the CCF would be 1-1/2 or 50%.

        The CCF is output every 10 seconds during the takeover process, but
        even in the largest private networks, you won't see more than a couple
        of the indicators, not enough to provide you with any meaningful data.

        Please read this in conjunction with the SUP42.Y01 file and if you have
        any further questions, please let me know.








                                          14                      
        SDLC Interface crash during startup--TECHALERT       






                  9 -  SDLC Interface crash during startup--TECHALERT







        Written by: John Mckiernan, HQ Network Staff Consultant
              Date: December 17, 1986







        Recently, we found that V1.12 SDLC and V2.02 SDLC software  would crash
        during initialization due to ISIS rejecting the 'Connect SIO' SVC .  We
        have found that a previous quick fix to resolve a problem in HDLC Micro
        Engine SIO firmware  would lead to an  invalid operand in the  SVC, and
        ISIS would reject it.  SDLC software is designed to crash in this event
        as one means of pointing out a serious problem.

        To address this problem,  a corrective patch is available  in (PINGCHU)
        INISIO.P12 and INISIO.P22 (for V1.12  / V2.02) . These patches  will be
        released in  the next release  of the patch  files for  these products.
        Until then, it is my best recommendation that these patches be included
        in your next assembly and until further notice.

        On a side note, the required 'quick fix' for the HDLC Micro  Engine SIO
        firmware problem is also available by defining the symbol NEWSIO in the
        assembly.  The above  patches are designed  to provide the  'quick fix'
        where that symbol is defined, and remove it where not.
















                                          15                      
        Engine Ring Wrap                                    






                                10 -  Engine Ring Wrap







        Written by: Ron Vivier, HQ Network Staff Consultant
              Date: December 18, 1986






                ENGINE RING WRAP
                ----------------

             The problems called RING-WRAP can occur in two seperate  areas but
        to the user  look the same.  Internally  the two are  totally different
        and need to be addressed in different ways.

          1. ISIS ASYNC RING    A wrap on the ISIS async ring can be  caused by
        data  coming  in at  a  faster  rate than  the data is pulled  out.  On
        version  3.05  the  ring  size  is  26  bytes; 4800 baud can  arrive at
        480 cps, which  says that  we  have about  54  milliseconds  to process
        the data.  In  version  6.0x  the  ring  size  can  be defined  at code
        generation time (Default  is  58  bytes  [64  bytes -  6  for header]).
        By defining larger  rings  you  can  buy  more time.  For machines with
        heavy  load  from  2400  baud  ports  the  default  works  great.  With
        4800 baud you should use 128 bytes.

             In addition to defining larger async rings the 6.0x  consat allows
        you  to  define  the  size  of the  ISIS rings (ORING,IRING)  and total
        space   allocated   for  bufferletes.   For   engines  expecting   high
        traffic  rates  from  a  consat  these  can provide  greater throughput
        and reduce risk of buffer zaps.

          2. ENGINE MICROCODE   A wrap  on the microcode ring is caused  by too
        many   "characters"  to  process  in  between  interrupts.   For   high
        speed  async  the  engine  must interrupt  at 14,400 times  per second.
        On each of  these  interrupts  the  microcode  has to  poll  each async
        port  group 3-6  times,  and  then attempt  to form characters from the
        polls.   This  means  that  we  have  about  69  microseconds   between
        interrupts.   While   an   actual  wrap  of   the   microcode  ring  is
        possible,  a  more   common   problem  is   when  the  microcode  takes
        longer  than  69  microseconds  to complete  its work.   In  this  case


                                          16                         
        Engine Ring Wrap                                     


        the  engine  will  actually  lose an  interrupt  which  will  throw off
        the timing.

             Another  item  of  consideration  here  is  the  amount   of  time
        interrupts   are  disabled.  If  the  interrupts  are disabled  when an
        interrupt  is  scheduled  to  occur,  the  interrupt  will  be delayed.
        In  the  case  of  our  interrupts used for async this can cut into our
        allowed processing  time.  (ie.  If  you  disable  interrupts  for   20
        microseconds you  run  the  risk  of  only having  49  microseconds  to
        process before the next interrupt.)

             PROPOSALS
             ---------

          1. Currently  we  are reconfiguring  consat engines  to  minimize the
             interrupt load.

             This  just slightly  helps the  problem.  Estimate  is  20%-25% in
             terms of probable failure.

          2. Deploy dedicated MICRO-ENGINES.

             This again  just reduces our  risk by limiting  the ports  on each
             engine to a max of 16.  About the same as #1.

          3. Deploy MAC III with 10Mhz CPU.

             Once  again  this  only  reduces  the  risk.   Estimates  for this
             configuration are about 25%-30% better than #1 above.
     
          4. Deploy SIO/ASYNC.

             By going to SIO/ASYNC you remove all forms of RING-WRAP.  The only
        items to be considered  here is that we  will need to use  version 6.01
        (or higher) of the consat.   This code is currently in  BETATEST.  Also
        we have  never tested  greater than  16 SIO/ASYNC  ports on  an engine.
        Last of all SIO/ ASYNC costs much more than standard async.

















                                          17                       
 sHk3=