


CFB NO.:  122                                        DATE:  MAY  8, 1986      

REV LEVEL:  2                                DATE CHANGED:  JUNE 28, 1987

TYPE:  HARDWARE
HARDWARE:  ENGINE
SUBJECT:  MAC III INSTALLATION AND IDENTIFICATION


                     MAC III INSTALLATION INSTRUCTIONS

THE MAC III BOARD COMBINES MEMORY AND MAC ON A SINGLE BOARD, THUS FREEING
UP ONE SLOT IN THE ENGINE.  IT CAN BE INSTALLED IN A SINGLE BUCKET (16 SLOT)
ENGINE, A MINI-ENGINE, OR A DUAL MINI-ENGINE.  IT CANNOT BE INSTALLED IN A
DOUBLE BUCKET ENGINE (32 SLOTS).

THE MAC III BOARD HAS THE FOLLOWING FUNCTIONS:
  -RELOCATION
  -DIRECT MEMORY ACCESS AND PROCESSOR ACCESS ARBITRATION
  -ONE MEGABYTE OF 45 NANOSECOND STATIC RAM (WITH PARITY CHECKING)
  -DIRECT MEMORY ACCESS INTERFACE AND CONTROL FUNCTIONS
  -DIAGNOSTIC ERROR REGISTERS

DIFFERENCES BETWEEN THE MAC II AND THE MAC III:
  THE MAC III BOARD DOES NOT HAVE THE TRACE CAPABILITY OF THE MAC II BOARD,
  HOWEVER, AN EXTRA 32 BIT REGISTER HAS BEEN ADDED AT MEMORY MAPPED LOCATION
  350,352 HEX FOR THE PURPOSE OF SAVING THE VIRTUAL ADDRESS OF THE MEMORY
  LOCATION THAT PRODUCED A MAC ERROR INTERRUPT WHEN IT WAS ACCESSED.  THE
  ECC AND ERROR LOG CAPABILITIES OF THE DYNAMIC SEMI-CONDUCTOR MEMORY BOARD
  HAVE NOT BEEN INCORPORATED INTO THE MAC III.  ALSO, THE PRESENT MAC III
  DESIGN IS LIMITED TO ONE MEGABYTE.  THE MAC III LOGIC HAS BEEN FIXED TO
  CORRECTLY REPORT A PARITY ERROR DURING A READ BY THE DMA, MSB OF LOCATION
  348.  ALSO, THE DMA TIMEOUT ERRORS HAVE BEEN CORRECTED TO REPORT THE ERROR
  EVEN IF CPU CYCLES ARE IN PROGRESS.

PARTS REQUIRED FOR INSTALLATION OF A MAC III BOARD:
  A MODIFIED ROM I/O, CPU, AND CONNECTOR 0 TERMINATOR ARE REQUIRED TO
  INSTALL A MAC III.  AT PRESENT, IT IS PLANNED THAT THE CPU AND ROM I/O
  WILL BE MODIFIED AT A DEPOT FACILITY AND SHIPPED AS A SET WITH THE MAC III.
  THE CONNECTOR 0 TERMINATOR WILL BE MODIFIED IN THE FIELD (AS IT REQUIRES
  ONLY THE ADDITION OF TWO RESISTORS AND CUTTING OF TWO PINS).  THE CPU AND
  ROM I/O ARE SET UP SO THAT THEY CAN BE JUMPERED TO OPERATE WITH A MAC III
  OR A MAC II AND SEMI-CONDUCTOR MEMORY BOARD (OR STATIC RAM BOARD).  THE
  CONNECTOR 0 TERMINATOR, ONCE IT IS MODIFIED WITH THE TWO NEW RESISTORS,
  CAN OPERATE WITH EITHER MAC III OR MAC II.

  E.C.O. 86-034 MODIFIES THE CPU BOARD FOR OPERATION WITH MAC III, BUT ALSO
  INCLUDES A FIX THAT GREATLY REDUCES UNWANTED NOISE ON THE "SYSCLR" CIRCUIT
  OF THE BOARD.  A MODIFIED BOARD CARRIES THE PART NUMBER OF 470137-002.
  (NOTE: JUMPER STAKES ADDED TO THE BOARD ALLOW IT TO BE OPTIONED BACK TO
  OPERATE WITH MAC II AND SEMI-CONDUCTOR MEMORY.)

  E.C.O. 86-035 MODIFIES THE ROM I/O BOARD FOR OPERATION WITH MAC III, BUT
  ALSO INCLUDES A FIX THAT GREATLY REDUCES UNWANTED NOISE ON THE "SYSCLR"
  CIRCUIT OF THE BOARD.  A MODIFIED BOARD CARRIES THE PART NUMBER OF
  470136-003 (STANDARD ENGINE MICROCODE) OR 470136-004 (SUPERVISOR ENGINE
  MICROCODE).  (NOTE: JUMPER STAKES ADDED TO THE BOARD ALLOW IT TO BE
  OPTIONED BACK TO OPERATE WITH MAC II AND SEMI-CONDUCTOR MEMORY.)

  E.C.O. 86-033 MODIFIES THE CONNECTOR 0 TERMINATOR FOR OPERATION WITH
  MAC III AND ROM I/O AND CPU BOARDS WITH THE ABOVE E.C.O.'S INCORPORATED.
  NOTE THAT THE CONNECTOR 0 TERMINATOR WITH E.C.O. 86-033 CAN OPERATE
  SUCCESSFULLY WITH ROM I/O AND CPU BOARDS THAT HAVE E.C.O.'S 86-034
  AND 86-035 OR WITH BOARDS THAT DO NOT HAVE THESE E.C.O.'S., BUT THE
  REVERSE SITUATION IS NOT TRUE:  IF A ROM I/O AND CPU WITH E.C.O.'S
  86-034 AND 86-035 ARE IN AN ENGINE, THEN THE CONNECTOR 0 TERMINATOR
  IN THAT ENGINE MUST HAVE E.C.O. 86-033.

  YOU CAN RECOGNIZE THAT A ROM I/O HAS E.C.O. 86-034 BY LOCATING A SET
  OF SIX STAKE JUMPER PINS AT LOCATION 10 P ON THE BOARD.
  YOU CAN RECOGNIZE THAT A CPU HAS E.C.O. 86-035 BY LOCATING A SET OF
  THREE STAKE JUMPER PINS AT LOCATION S 5 ON THE BOARD.
  YOU CAN RECOGNIZE THAT A CONNECTOR 0 TERMINATOR HAS E.C.O. 86-033 BY
  LOCATING TWO 470 OHM RESISTORS ON THE UNDERNEATH SIDE OF THE BOARD
  SOLDERED BETWEEN PINS 2 AND 16 AND BETWEEN PINS 7 AND 16 OF DIP
  PLATFORM A3.

  ADDITIONAL E.C.O.'S REQUIRED ARE AS FOLLOW:
     ROM I/O E.C.O. 86-160.  THIS IS REQUIRED WHEN RUNNING WITH MAC III
     AND USING ASYNC.  CHECK THE FRONT OF THE BOARD FOR "86-160" OR CHECK
     TO SEE IF THERE IS A 74F378 CHIP AT LOCATION N2.
     ROM I/O E.C.O. 86-191.  THIS IS REQUIRED WHEN RUNNING WITH MAC III.
     CHECK THE FRONT OF THE BOARD FOR "86-191" OR CHECK TO SEE IF A JUMPER
     EXISTS BETWEEN 10N-6 AND 10P-6.
     MAC III E.C.O. 86-074.  THIS IS MANDATORY ON ALL THE OLDER "B1" ETCH
     ARTWORK BOARDS.  CHECK FRONT OF BOARD FOR "86-074" OR CHECK FOR A
     JUMPER WIRE FROM 12N-7 TO 16N-1.
     MAC III E.C.O. 86-083.  THIS IS MANDATORY ON ALL THE OLDER "B1" ETCH
     ARTWORK BOARDS.  CHECK FRONT OF BOARD FOR "86-083" OR CHECK FOR A
     74F74 I.C. AT LOCATION 10N.
     MAC III E.C.O. 86-283.  THIS IS MANDATORY ON ALL "D1" ETCH ARTWORK
     BOARDS.  CHECK FRONT OF BOARD FOR "86-283" OR LOOK FOR A CUT TRACE
     BETWEEN 5A-8 AND 5B-13 ON THE SOLDER SIDE.

HOW TO PERFORM THE INSTALLATION:
  REMOVE THE CPU, ROM I/O, MAC II, SEMI-CONDUCTOR MEMORY, AND CONNECTOR 0
  TERMINATOR FROM THE ENGINE TO BE UPGRADED.

  MODIFY THE CONNECTOR 0 TERMINATOR IN THE FOLLOWING MANNER:
    1. MAKE SURE E.C.O. 84-129 HAS BEEN INCORPORATED (PART OF THE GENERAL
       BACKPLANE NOISE E.C.O. PACKAGE 84-129,130,131,&132).
    2. REMOVE THE R-PACK AT LOCATION A3.
    3. BEND OUT THE R-PACK LEGS 2 & 7 AND RE-INSERT R-PACK INTO A3 (NOW
       LEGS 2&7 WILL NOT CONTACT).
    4. ON THE UNDERNEATH SIDE OF THE TERMINATOR SOLDER A 470 OHM RESISTOR
       FROM PIN 2 TO PIN 16 OF SOCKET A3.  SOLDER ANOTHER 470 OHM RESISTOR
       FROM PIN 7 TO PIN 16 OF SOCKET A3.
    5. RE-INSTALL MODIFIED CONNECTOR 0 TERMINATOR ON ENGINE.

  NOW CHECK THE CPU BOARD PROVIDED WITH THE MAC III UPGRADE AND MAKE SURE
  THAT AT BOARD POSITION S5, STAKE JUMPER PINS 2&3 ARE JUMPERED TOGETHER
  TO SUPPORT MAC III (PINS 1 & 2 WOULD BE JUMPERED TOGETHER TO SUPPORT
  MAC II). NOW INSTALL THE CPU BOARD.

  NOW CHECK THE ROM I/O BOARD PROVIDED WITH THE MAC III UPGRADE AND MAKE
  SURE THAT AT BOARD POSITION 10P, STAKE JUMPER PINS 4&5 ARE JUMPERED
  TOGETHER AND PINS 2&3 ARE JUMPERED TOGETHER (TO SUPPORT MAC II YOU WOULD
  JUMPER PINS 1&2 AND ALSO PINS 5&6). NOW INSTALL THE ROM I/O BOARD.

  NOW CHECK THE MAC III BOARD (P/N 430269-001) AND MAKE SURE THAT THE STAKE
  JUMPER  PINS NEAR LOCATION B24 (NEXT TO THE LARGE TRANSISTOR) ARE SET UP AS:
  IF THE ENGINE IS TO RUN WITHOUT A BATTERY BACKUP UNIT THE JUMPER PINS 
  SHOULD BE JUMPERED TOGETHER IN THE FOLLOWING WAY:  1 TO 2,  3 TO 4,  
  AND 5 TO 6.  PINS 7 TO 8,  9 TO 10, AND  11 TO 12 SHOULD NOT BE JUMPERED.
  IF THE ENGINE IS TO RUN WITH A BATTERY BACKUP UNIT THEN THE JUMPER PINS
  SHOULD BE JUMPERED TOGETHER IN THE FOLLOWING WAY:  7 TO 8, 9 TO 10,
  AND 11 TO 12.  1 TO 2,  3 TO 4, AND  5 TO 6 SHOULD NOT BE JUMPERED.
  IT IS IMPORTANT TO NOTE THAT BATTERY BACKUP UNITS CANNOT (REPEAT CANNOT)
  BE USED WITH A "B1" ETCH MAC III.  THE BATTERY BACKUP UNIT CAN BE USED
  WITH A "D1" ETCH MAC III AND HIGHER.

  NOW TURN THE ENGINE ON AND CHECK VOLTAGE (+5.22,+16.5,AND -16.5) ON THE
  BACKPLANE AND ADJUST IF NECESSARY.  BOOT THE ENGINE AND RUN THE CPU, MAC,
  AND MEMORY DIAGNOSTICS.  IF ANY OF THE TESTS FAIL, THE MODIFIED CPU AND
  ROM I/O CAN BE JUMPERED BACK TO SUPPORT MAC II AND THE MAC III CAN BE
  REMOVED AND REPLACED BY THE MAC II AND A SEMI-CONDUCTOR MEMORY BOARD CAN BE
  RE-INSTALLED, THEN THE TESTS CAN BE RUN AGAIN TO SEE IF THE FAILURE SYMPTOM
  CHANGES.  THIS IS A VALID METHOD OF ISOLATING A PROBLEM BETWEEN CPU, ROM,
  I/O, AND MAC III.

IF THERE ARE ANY QUESTIONS REGARDING THIS CFB PLEASE FEEL FREE TO CALL NTS
AT (800)538-3158 OUTSIDE CALIFORNIA, (408)432-5155 INSIDE CALIFORNIA, OR,
ONTYME AT QSATS.NTSOPS.



 