
:	OUR NETWORK IDS (DNIC), MND.MX DNIC ENTRIES PER LINE

:	FOR EFFICIENCY, EVEN THOUGH THE NUMBER OF ODNIC ENTRIES
:	FOR EACH LINE MAY NOT BE EQUAL, WE MAKE EACH LIST EQUAL TO
:	THE LONGEST LIST (MND.MX).  ALSO, SO THAT WE CAN AVOID DIVISION,
:	EACH LIST IS MADE A POWER OF TWO.
  IF	1-\MND.MX
MND.MX	EQ	NDI.MX
  ELSE
    IF	MND.MX
MND.MX	EQ	MND.MX-1	:CONVERT TO AN ORDNIAL (LIKE NDI.MX)
    EI
  EI
  IF	.GT.(NDI.MX,MND.MX)
 ERROR( ,1)
	NUMBER $A NDI.MX
 REMARK  DNICs were created by the ODNIC statement but only
	NUMBER $A MND.MX
 ERRLIN(DNICs are permitted by the MAXODNIC statement)
  EI

:	CREATE SHIFT COUNT FOR POWER OF 2.
NDI.SC	EQ	$4(((333333332222110^-(2*MND.MX-2))&3)+1)*(MND.MX/MND.MX)
NDI.MX	EQ	1^NDI.SC	:UPDATE # OF ENTRIES TO POWER OF 2
MND.MX	EQ	NDI.MX

PA0PTR  EQ      ((PA0PTR+3)/4*4)
PATCH(880826,1400,JWANG,PA0PTR,,2*NLINKS*NDI.MX)
NDI.LT	HS
  .DOB.(Q,0,NLINKS)
   .DOB.(QQ,0,NDI.MX)
	HC	ND|QQ|.|Q|
   .DOE.1
  .DOE.0

ENDPATCH(NO DNIC)
