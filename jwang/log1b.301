:
: PATCH FOR VERSION 3.01
: PROBLEM REPORTED BY ENS
:
: PROBLEM: 1. DTE SEND CLEAR REQUEST PACKET TO DCE PERIODICALLY.
:             OUR X.25 (DCE) RESPONSE WITH CLEAR CONFIRMATION FOR
:             IT NO MATTER THIS CHANNEL IS OUT OF RANGE OR 'INSIDE
:             THE RANGE BUT INACTIVE'.
:          2. OUR DCE REPORT SUP LOG MESSAGE 'IB' AND 'IC'.
: TASK   : THERE IS NO VILOATION OF CCITT FOR PROBLEM 1. HOWEVER,
:          FOR PROBLEM 2, WE NEED TO AVOID REPORTING LOG FOR THE
:          CLEAR REQUEST WITH THE CHANNEL INSIDE THE RANG BUT 
:          INACTIVE. WE SHOULD ONLY REPORT FOR THE CLEAR QUEST WHOSE
:          CHANNEL NUMBER ISNNEL OUT OF RANGE TO BRING OUR
:          ATTENTION THAT THE CHANNEL RANGE ON BOTH SIDE MAY NOT
:          BE THE SAME.
:          THIS SKIPPING REPORTING CAN SAVE LOG SPACE.
:          RTD180 AND RTD495 AND PSUBDA ARE PATCHED.
:          THE COUNTER INACNT CAN BE USED TO CHECK THE NUMBER OF
:          TIMES THAT DTE SENDS CLEAR REQUEST WITH THE CHANNEL
:          INSIDE THE RANGE BUT INACTIVE. THIS COUNTER
:          IS CLEARED TO ZERO ONLY WHEN THE SLOT IS RELOADED OR
:          COUNTER REACHES '0FFFF'.
: ESCALATION: 39255

PATCH(861017,1400,JWANG,PA0PTR,,2*(NEPORT/10)+2+2)
INACNT  HC      0       :COUNTER FOR CLEAR REQ QITH INACTIVE CHANNEL
INACTC  HS      (NEPORT/10)+1   :FLAG FOR MARKING CLR WITH INACT CHAN RCV'D
CONPATCH(RTD180+10,,6)
        J       PA1PTR,,
CONPATCH(PA1PTR,,20)
        LH      R1,EI.MT,R4,R4
        JG      RTD180+1A,,
        SBT     R4,INACTC,,     :SET BIT ON FOR CLR WITH INACTIVE CHAN
        LIS     R0,1
        AHM     R0,INACNT,,     :INCREMENT BY 1.
        J       RTD400,,
CONPATCH(RTD495+6,,6)
        J       PA1PTR,,
CONPATCH(PA1PTR,,1E)
        LHL     R0,EPORT
        TBT     R0,INACTC,,
        JN      RTD020,,        :NO NEED TO REPORT LOG '1C' MSG
        LIS     R0,1
        AHM     R0,RTDER3,RL,RL
        J       RTD020,,
CONPATCH(PSUBDA+6,,6)
        J       PA1PTR,,
CONPATCH(PA1PTR,,2C)
        LH      R4,ELCI,,
        SH      R4,LCC.LT,RL2,
        AH      R4,EPB.LT,RL2,  :COMPUTE EPORT
        RBT     R4,INACTC,,
        JN      RMK030,,        :NO NEED TO REPORT LOG '1B' MSG
        LIS     R4,1
        AHM     R4,PCKER2,,
        J       RMK030,,
ENDPATCH(SKIP REPORTING ERROR LOG 1B 1C FOR CLR WITH INACTIVE CHANNEL)
